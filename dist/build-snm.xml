<?xml version="1.0"?>
<project name="net.bodz.dist" default="default">

    <property environment="env" />
    <import file="${env.LAPIOTA}/lib/ant/basic.xml" />

    <target name="default" depends="10bin.jar, 10src.jar, 20mkbat, .kala.dist" />

    <target name="00update-lib">
        <copy todir="${basedir}/lib">
            <fileset dir="${JAVA_LIB}">
                <include name="${lib.asm}" />
                <include name="${lib.jna}" />
                <include name="${lib.jacob}" />
                <include name="${lib.roxes_win32}" />
            </fileset>
        </copy>
    </target>

    <target name="10bin.jar">
        <mkdir dir="build" />
        <jar destfile="build/net.bodz.dist.jar" update="true" manifest="META-INF/MANIFEST.MF">
            <zipfileset prefix="META-INF" dir="META-INF" />
            <fileset dir="mod/Package Maintaince/bin" />
            <fileset dir="mod/Software Protection/bin" />
            <fileset dir="mod/Utilities/bin" />
        </jar>
    </target>

    <target name="10src.jar">
        <mkdir dir="build" />
        <jar destfile="build/net.bodz.dist-src.jar" update="true">
            <fileset dir="mod/Package Maintaince/src" />
            <fileset dir="mod/Software Protection/src" />
            <fileset dir="mod/Utilities/src" />
        </jar>
    </target>

    <target name="20mkbat" depends="10bin.jar">
        <mkbat outdir="${basedir}/bin">
            <library>bodz_dist</library>
            <classpath refid="project.classpath" />
            <findmain path="mod/Package Maintaince/bin" />
            <findmain path="mod/Software Protection/bin" />
            <findmain path="mod/Utilities/bin" />
        </mkbat>
        <mkbat outdir="${basedir}/test.bin">
            <library>bodz_dist</library>
            <classpath refid="project.classpath" />
            <findmain path="mod/Package Maintaince/test.bin" />
            <findmain path="mod/Software Protection/test.bin" />
            <findmain path="mod/Utilities/test.bin" />
        </mkbat>
    </target>

</project>
