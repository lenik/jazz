<?xml version="1.0"?>
<project name="net.bodz.swt" default="default">

    <property environment="env" />
    <import file="${env.LAPIOTA}/lib/ant/basic.xml" />

    <target name="default" depends="10bin.jar, 10src.jar, 20mkbat, .kala.dist" />

    <target name="10bin.jar">
        <mkdir dir="build" />
        <jar destfile="build/net.bodz.swt.jar" update="true">
            <fileset dir="target/mod/Bundled Modules/main-classes" />
            <fileset dir="target/mod/Common Controls/main-classes" />
            <fileset dir="target/mod/Commons/main-classes" />
            <fileset dir="target/mod/GUI Framework/main-classes" />
            <fileset dir="target/mod/Geom Shapes/main-classes" />
            <fileset dir="target/mod/Presentation/main-classes" />
        </jar>
        <length property="size.bin" file="build/net.bodz.swt.jar" />
        <echo>Size: ${size.bin}</echo>
    </target>

    <target name="10src.jar">
        <mkdir dir="build" />
        <jar destfile="build/net.bodz.swt-src.jar" update="true">
            <fileset dir="mod/Bundled Modules/main" />
            <fileset dir="mod/Common Controls/main" />
            <fileset dir="mod/Commons/main" />
            <fileset dir="mod/GUI Framework/main" />
            <fileset dir="mod/Geom Shapes/main" />
            <fileset dir="mod/Presentation/main" />
        </jar>
        <length property="size.src" file="build/net.bodz.swt-src.jar" />
        <echo>Size: ${size.src}</echo>
    </target>

    <target name="20mkbat" depends="10bin.jar">
        <mkbat outdir="${basedir}/bin">
            <library>bodz_swt</library>
            <classpath refid="project.classpath" />
            <findmain path="target/mod/GUI Framework/main-classes" />
            <findmain path="target/mod/Presentation/main-classes" />
        </mkbat>
        <!--
        <mkbat outdir="${basedir}/test.bin">
            <library>bodz_swt</library>
            <library value="${basedir}" />
            <classpath refid="project.classpathWithTest" />
            <findmain path="target/mod/Commons/test-classes" />
            <findmain path="target/mod/GUI Framework/test-classes" />
            <findmain path="target/mod/Presentation/test-classes" />
        </mkbat>
        -->
    </target>

</project>
